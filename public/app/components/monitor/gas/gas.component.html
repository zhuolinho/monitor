<div class="" style="overflow-x:hidden">

  <div class="row helper-margin-bottom-5 valign-wrapper">
    <div class="col s7  helper-white-bg">
      <div class="input-field">

        <select class="helper-select-font-bigger current-plc">
          <option *ngFor="let addr of connectedPlcs" [value]="addr" > {{addr}}-金山枫湾路777号</option>

        </select>
          <label >选择地址</label>
        </div>
    </div>
    <div class="col s5">
    </div>
  </div>


  <div class="row helper-vmargin-15">
      <div class="col m7">
        <div class="row modal-nav monitor-tabs">
          <div class="col s3">
              <a (click)="selectedtab=1; detailmodal.selectedtab = selectedtab; showDetailModal(); showByDay();" [class.monitor-tab-selected]="selectedtab==1" class="waves-effect monitor-tab monitor-tab-selected waves-light btn monitor-gray-button  helper-font-bigger helper-display-block center-align"> 日均用量 </a>
          </div>

          <div class="col s3">
              <a (click)="selectedtab=2; detailmodal.selectedtab = selectedtab;  showDetailModal(); showByMonth();" [class.monitor-tab-selected]="selectedtab==2"  class="waves-effect monitor-tab waves-light btn monitor-gray-button helper-font-bigger helper-display-block center-align "> 月均用量</a>
          </div>
          <div class="col s3">

              <a (click)="selectedtab=3; detailmodal.selectedtab = selectedtab; showDetailModal();" [class.monitor-tab-selected]="selectedtab==3" class="waves-effect monitor-tab waves-light btn monitor-gray-button helper-font-bigger helper-display-block center-align"> 下载数据 </a>
          </div>
          <div class="col s3">
              <a (click)="selectedtab=4; detailmodal.selectedtab = selectedtab; showDetailModal();" [class.monitor-tab-selected]="selectedtab==4" class="waves-effect monitor-tab waves-light btn monitor-gray-button helper-font-bigger helper-display-block  center-align"> 在线支付 </a>
          </div>
        </div>
      </div>
  </div>

  <div class="divider">
  </div>




  <div class="helper-vscrolling" style="height:60vh; padding-bottom:30px; padding-top:10px;">
        <div class="helper-margin-bottom-20 valign-wrapper row">
          <div class="col m9">
            <div class=" ">
              <!-- <div class="row valign-wrapper helper-white-bg helper-padding-15 helper-font-bigger helper-display-block center-align">
               L001-金山枫湾路777号
              </div> -->


            <div class="row">


                              <div class="monitor-table  table55-45 helper-font-bigger helper-white-bg" *ngIf="realTimeData">

                                <div class="clearfix"></div>

                                <!-- <div class="table-row">
                                  <div class="table-cell"> 使用情况</div>
                                  <div class="table-cell"> 正在使用</div>
                                </div> -->

                                <div class="table-row">
                                  <div class="table-cell"> 流量表名称</div>
                                  <div class="table-cell"> CNG表</div>
                                </div>


                                <div class="table-row">
                                  <div class="table-cell">分配地址</div>
                                    <div class="table-cell"> <span *ngIf="realTimeData">{{realTimeData[currentPlcTank]?.addr1}}</span></div>
                                </div>

                                <!-- 标况累计 -->
                                <div class="table-row">
                                  <div class="table-cell">累计流量(Nm<sup>3</sup>)</div>
                                    <div class="table-cell"> <span *ngIf="realTimeData">{{realTimeData[currentPlcTank]?.psc1}}</span></div>
                                </div>

                                <!-- 瞬时标况 -->
                                <div class="table-row">
                                  <div class="table-cell">瞬时流量(Nm<sup>3</sup>/h)</div>
                                    <div class="table-cell"> <span *ngIf="realTimeData">{{realTimeData[currentPlcTank]?.isc1}}</span></div>
                                </div>

                                <div class="table-row">
                                  <div class="table-cell">温度(<sup>o</sup>C)</div>
                                    <div class="table-cell"> <span *ngIf="realTimeData">{{realTimeData[currentPlcTank]?.temp1}}</span></div>
                                </div>


                                <div class="table-row">
                                  <div class="table-cell"> 压力(Kpa)</div>
                                    <div class="table-cell"> <span *ngIf="realTimeData">{{realTimeData[currentPlcTank]?.p1}}</span></div>
                                </div>

                                <div class="clearfix"></div>

                              </div>

                              <div class="monitor-table table55-45 helper-font-bigger  helper-white-bg helper-margin-top-10" *ngIf="realTimeData">

                                <div class="clearfix"></div>

                                <!-- <div class="table-row">
                                  <div class="table-cell"> 使用情况</div>
                                  <div class="table-cell"> 正在使用</div>
                                </div> -->

                                <div class="table-row">
                                  <div class="table-cell"> 流量表名称</div>
                                  <div class="table-cell"> 总表</div>
                                </div>


                                <div class="table-row">
                                  <div class="table-cell">分配地址</div>
                                    <div class="table-cell"> <span *ngIf="realTimeData">{{realTimeData[currentPlcTank]?.addr2}}</span></div>
                                </div>

                                <!-- 标况累计 -->
                                <div class="table-row">
                                  <div class="table-cell">累计流量(Nm<sup>3</sup>)</div>
                                    <div class="table-cell"> <span *ngIf="realTimeData">{{realTimeData[currentPlcTank]?.psc2}}</span></div>
                                </div>

                                <!-- 瞬时标况 -->
                                <div class="table-row">
                                  <div class="table-cell">瞬时流量(Nm<sup>3</sup>/h)</div>
                                    <div class="table-cell"> <span *ngIf="realTimeData">{{realTimeData[currentPlcTank]?.isc2}}</span></div>
                                </div>

                                <div class="table-row">
                                  <div class="table-cell">温度(<sup>o</sup>C)</div>
                                    <div class="table-cell"> <span *ngIf="realTimeData">{{realTimeData[currentPlcTank]?.temp2}}</span></div>
                                </div>


                                <div class="table-row">
                                  <div class="table-cell"> 压力(Kpa)</div>
                                    <div class="table-cell"> <span *ngIf="realTimeData">{{realTimeData[currentPlcTank]?.p2}}</span></div>
                                </div>

              </div>


                <div class="clearfix"></div>

              </div>



            </div>

          </div>
          <div class="col s3 valign">
            <!-- <a (click)="veProcessed(alert)" *ngIf="!alert.processed" class="waves-effect  waves-light btn-large monitor-gray-button helper-font-double" style="display:block; width:160px; height:80px; margin:auto; text-align:center; line-height:80px;"> 已接报 </a> -->
          </div>

          <!-- modal goes here -->
            <!-- <gas-detail [data]="{id:'detailModal',alert:{name:'C003-闸北区大宁路335号XX站'}}" #detailmodal> </gas-detail> -->

        </div>



        <div class="helper-margin-bottom-20 valign-wrapper row">
          <div class="col m9">
            <div class="helper-white-bg" style="overflow-x:hidden;">
              <div class="row valign-wrapper helper-padding-15 helper-font-bigger helper-display-block">

                 L001-金山枫湾路777号 ({{availableTanks.length}}个储罐)

                <a  class="monitor-gray-button right helper-vpadding-5 helper-hpadding-15" (click)="veToggleSelectAllTanks()">
                  <span *ngIf="!allTankSelected">
                    全选
                  </span>

                  <!-- this.selectedTanks.length -->
                  <span *ngIf="allTankSelected">
                    反选
                  </span>
                </a>
                <a [class.disabled]="!selectedTanks.length" class="monitor-gray-button  right helper-vpadding-5 helper-hpadding-15 helper-margin-right-15" (click)="veReturnSelectedTanks()">拉回</a>
                <a [class.disabled]="!selectedTanks.length" class="monitor-gray-button right helper-vpadding-5 helper-hpadding-15 helper-margin-right-15" (click)="veAddSelectedTanks()">进场</a>
              </div>

              <div class="row  helper-gray-border-light">
                <div class="col s4 helper-font-bigger center-align">
                  现有储罐
                </div>

                <div class="col s8">
                    <div class="monitor-table vstrip helper-font-bigger" style="border-top:hidden; border-bottom:hidden;">
                          <div class="table-row" *ngFor="let tank of availableTanks; let i=index;">
                            <div class="table-cell" style="">
                            <span class="left" style="margin-top:6px;">{{tank.id}}</span>
                              <a class="right" style="margin-top:8px;"  >
                                <input type="checkbox" class="filled-in" id="{{tank.id+i}}" (click)="veToggleSelectTank(tank)"  *ngIf="tank.selected" checked = "checked" />
                                <input type="checkbox" class="filled-in" id="{{tank.id+i}}" (click)="veToggleSelectTank(tank)"  *ngIf="!tank.selected" />
                                <label attr.for="{{tank.id+i}}"></label>
                              </a>
                            </div>
                          </div>
                          <div class="clearfix"></div>
                    </div>

                </div>

              </div>

            </div>

          </div>
          <div class="col s3 valign">
          </div>

        </div>

  </div>


</div>









<!-- feedback modal -->

<div id="moveTanksFeedbackModal" class="modal modal-fixed-footer" style="max-width:500px;">
  <div class="modal-content helper-overflow-hidden">
    <i class="modal-close material-icons right">clear</i>
      <p class="center-align helper-font-bigger" style="padding-top:150px;">
        操作成功, 请在首页 》报警通知 查看并处理.
      </p>
  </div>
  <div class="modal-footer  center-align">
    <a class="modal-action modal-close waves-effect waves-green btn-flat" style="">知道了</a>
  </div>
</div>





    <!-- detail modal -->
    <div id="gasUsageDetailModal" class="modal  fixed helper-padding-bottom-20">
      <div class="modal-content helper-overflow-hidden">
        <i class="modal-close material-icons right">clear</i>

          <!-- <h4>Modal Header</h4> -->
          <div class="helper-font-double center-align helper-padding-30">
                  L001-金山枫湾路777号
          </div>

          <div class="row modal-nav monitor-tabs">
            <div class="col s3">
                <a (click)="showByDay(true); selectedtab=1; " [class.monitor-tab-selected]="selectedtab==1" class="waves-effect monitor-tab monitor-tab-selected waves-light btn monitor-gray-button helper-font-bigger helper-display-block center-align"> 日均用量 </a>
            </div>

            <div class="col s3">
                <a  (click)="showByMonth(true); selectedtab=2;" [class.monitor-tab-selected]="selectedtab==2"  class="waves-effect monitor-tab waves-light btn monitor-gray-button helper-font-bigger helper-display-block center-align"> 月均用量</a>
            </div>
            <div class="col s3">

                <a (click)="selectedtab=3;" [class.monitor-tab-selected]="selectedtab==3" class="waves-effect monitor-tab waves-light btn monitor-gray-button helper-font-bigger helper-display-block center-align"> 下载数据 </a>
            </div>
            <div class="col s3">
                <a (click)="selectedtab=4;" [class.monitor-tab-selected]="selectedtab==4" class="waves-effect monitor-tab waves-light btn monitor-gray-button helper-font-bigger helper-display-block  center-align"> 在线支付 </a>
            </div>

            <div class="clearfix"></div>

          </div>

          <div class="row helper-margin-top-15">
                    <hr />
          </div>



        <div *ngIf="selectedtab==1 || selectedtab==2" class="row modal-table helper-margin-top-20 helper-vscrolling" style="height:40vh;">


              <div class="row">
                <!-- <img src="dist/images/chart.jpg" alt="" width="100%; height:200px;"> -->

                <!-- <p class="helper-padding-left-15">瞬时流量 {{date}}</p> -->

                <div  class="helper-padding-left-15" id="statsChart">
                </div>

                <!-- <div id="realTimeSigStatus">
                </div> -->
              </div>




            <div class="row valign-wrapper">



              <div class="col m1 s12  helper-margin-left-5" style="max-width:35px; font-size:1.3em;">
                从
              </div>

              <div class="col m2  s12 helper-margin-bottom-15 helper-margin-left-0">
                  <input type="date" [(ngModel)]="statsStartDate"/>

              </div>
              <div class="col m1  s12  helper-margin-left-0" style="max-width:60px;font-size:1.3em;">
                -到-
              </div>
              <div class="col m2  s12  helper-margin-bottom-15 helper-margin-left-0">
                  <input type="date" [(ngModel)]="statsEndDate"/>
              </div>


              <div class="col s12 m2 helper-margin-left-5">
                    <a class="btn  monitor-gray-button  waves-effect waves-light helper-margin-right-5" (click)="computeStats();">
                      查看
                    </a>
              </div>

<!--
              <div class="col s3 m3">
                <a class="btn right monitor-gray-button  waves-effect waves-light helper-margin-right-5" (click)="downloadData();">
                  下载数据
                </a>
              </div> -->
            </div>


              <div class="">
                <div *ngIf="isShowByDay">
                  <div class="monitor-table stripped">
                    <div class="table-row  helper-gray-bg-light">
                      <div class="table-cell"> 罐号 </div>
                      <div class="table-cell">日期  </div>
                      <div class="table-cell">累计流量 </div>
                      <div class="table-cell">用量  </div>
                    </div>

                    <div class="table-row"  *ngFor="let data of statsData; let i=index;">
                      <div class="table-cell"> L001 </div>
                      <div class="table-cell"> <span *ngIf="realTimeData">{{data.date}}</span></div>
                      <div class="table-cell"> <span *ngIf="realTimeData">{{data.maxVal}}</span> </div>
                      <div class="table-cell">  <span *ngIf="realTimeData">{{data.usage}}</span> </div>
                    </div>

                  </div>  <!-- end of table -->

                  <div  *ngIf="!statsData.length">
                    <div style="text-align:center; margin-top: 20px;"> 数据未满一天 </div>
                  </div>

                </div>


                <div *ngIf="!isShowByDay">

                  <div class="monitor-table stripped" >
                    <div class="table-row  helper-gray-bg-light">
                      <div class="table-cell"> 罐号 </div>
                      <div class="table-cell">日期  </div>
                      <div class="table-cell">累计流量 </div>
                      <div class="table-cell">用量  </div>
                    </div>


                    <div class="table-row" *ngFor="let data of statsData" >
                      <div class="table-cell"> L001 </div>
                      <div class="table-cell"> <span *ngIf="realTimeData">{{data.date}}</span></div>
                      <div class="table-cell"> <span *ngIf="realTimeData">{{data.maxVal}}</span> </div>
                      <div class="table-cell">  <span *ngIf="realTimeData">{{data.usage}}</span> </div>
                    </div>
                  </div>   <!-- end of table -->

                  <div  *ngIf="!statsData.length">
                    <div  style="text-align:center; margin-top: 20px;"> 数据未满一个月! </div>
                  </div>

                </div>

              </div>

              <!-- padding div -->
              <div style="height:80px;"></div>
          </div>



          <div *ngIf="selectedtab==3"  class="center-align" style="margin:20px 0;">

            <p>
              <a  (click)="selectedDownloadTab=1;" [class.monitor-tab-selected]="selectedDownloadTab==1"  class="btn  monitor-gray-button  waves-effect waves-light helper-margin-right-5">
                瞬时流量
              </a>
              <a (click)="selectedDownloadTab=2;" [class.monitor-tab-selected]="selectedDownloadTab==2" class="btn  monitor-gray-button  waves-effect waves-light helper-margin-right-5">
                日均用量
              </a>
              <a (click)="selectedDownloadTab=3;" [class.monitor-tab-selected]="selectedDownloadTab==3" class="btn  monitor-gray-button  waves-effect waves-light helper-margin-right-5">
                月均用量
              </a>
            </p>

          <div class="container-fluid" *ngIf="selectedDownloadTab">

              <div class="" style="margin:60px auto; max-width:550px;">
                <div *ngIf="selectedDownloadTab==3" style="text-align:center;margin-bottom:15px;"> 请选择开始月份的第一天和结束月份的最后一天</div>

                <div class="helper-inline-block helper-margin-left-5" style="font-size:1.3em;">
                  从
                </div>

                <div class="helper-inline-block helper-margin-left-0">
                    <input type="date" [(ngModel)]="statsStartDate"/>

                </div>
                <div class="helper-inline-block helper-hpadding-20" style="font-size:1.3em;">
                  -到-
                </div>
                <div class="helper-inline-block helper-margin-left-0">
                    <input type="date" [(ngModel)]="statsEndDate"/>
                </div>


                <div class="helper-inline-block helper-margin-left-5">
                      <a class="btn  monitor-gray-button  waves-effect waves-light helper-margin-right-5" (click)="downloadData();">
                        下载
                      </a>
                </div>

                <div class="clearfix"></div>
            </div>
          </div>
          </div>

          <h4 *ngIf="selectedtab==4" class="center-align" style="margin:13% 0;">
            在线支付
          </h4>
      </div>
  </div>
